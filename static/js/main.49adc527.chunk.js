(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(t,e,s){t.exports=s(28)},17:function(t,e,s){},19:function(t,e,s){},23:function(t,e,s){},25:function(t,e,s){},27:function(t,e,s){t.exports=s.p+"static/media/intro.d8ffc850.mp4"},28:function(t,e,s){"use strict";s.r(e);var a,n=s(0),o=s.n(n),r=s(11),i=s.n(r),c=(s(17),s(1)),u=s(2),l=s(4),h=s(3),p=s(5),d=(s(19),s(7)),m=s.n(d),f=s(8),g=s(9),v=s(6),w=(s(23),s(25),function(t){function e(t){var s;return Object(c.a)(this,e),(s=Object(l.a)(this,Object(h.a)(e).call(this,t))).pauseVideo=function(t){s.setState({showVideo:!1,showAssociation:!0})},s.selectAssociation=function(t){s.setState({showIntro:!0,showVideo:!1,showAssociation:!1})},s.state={showIntro:!0,showVideo:!1,showAssociation:!1,introText:s.props.intro,src:s.props.src+"#t="+s.convertTime(s.props.start)+","+s.convertTime(s.props.end),associations:s.props.associations,films:[],arcs:[]},s.handleClickOutside=s.handleClickOutside.bind(Object(v.a)(Object(v.a)(s))),s}return Object(p.a)(e,t),Object(u.a)(e,[{key:"convertTime",value:function(t){var e=t.split(":");return 60*+e[0]+ +e[1]}},{key:"componentDidMount",value:function(){var t=this;a=setTimeout(function(){return t.setState({showIntro:!1,showVideo:!0})},5e3),document.addEventListener("click",this.handleClickOutside),this.getNodes()}},{key:"getNodes",value:function(){var t=Object(f.a)(m.a.mark(function t(){var e,s;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://raw.githubusercontent.com/gerdesque/pastforwardgraph/master/films.json");case 3:return e=t.sent,t.next=6,e.json();case 6:s=t.sent,this.setState({films:s.nodes,arcs:s.arcs}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.error(t.t0);case 13:case"end":return t.stop()}},t,this,[[0,10]])}));return function(){return t.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){clearTimeout(a),document.removeEventListener("click",this.handleClickOutside)}},{key:"handleClickOutside",value:function(t){t.preventDefault(),t.stopPropagation(),this.node&&!this.node.contains(t.target)&&this.setState({showIntro:!1,showVideo:!1,showAssociation:!1})}},{key:"getThumbnail",value:function(t){return this.state.films.find(function(e){return e.section===t}).thumbnail}},{key:"render",value:function(){var t=this,e=null,s=null,a=null;if(this.state.showIntro&&(e=o.a.createElement("div",{className:"intro"},o.a.createElement("p",{className:"intro-Text"},this.state.introText))),this.state.showVideo&&(s=o.a.createElement("video",{autoPlay:!0,onPause:this.pauseVideo},o.a.createElement("source",{type:"video/mp4",src:this.state.src}),"Your browser does not support the video tag.")),this.state.showAssociation){var n=this.state.associations.map(function(e){return o.a.createElement("div",{className:"association-Container",onClick:t.selectAssociation},o.a.createElement("img",{className:"association-Image",alt:e.target,src:t.getThumbnail(e.target)}),o.a.createElement("p",{className:"association-Text"},e.associationText))});a=o.a.createElement("div",{className:"association"},n)}return o.a.createElement("div",{className:"Video",ref:function(e){t.node=e}},e,s,a)}}]),e}(n.Component)),b=function(t){function e(t){var s;return Object(c.a)(this,e),(s=Object(l.a)(this,Object(h.a)(e).call(this,t))).size=.25*Math.random()+.5,s.angle=Math.random()*Math.PI/4*(2*Math.random()-1),s.store=[{x:-1,y:-1},{x:-1,y:-1}],s.dragging=!1,s.disable_click=!1,s.swipe=!1,s.threshold=100,s.restraint=100,s.allowedTime=500,s.self=Object(v.a)(Object(v.a)(s)),s.onDown=function(t){t.preventDefault(),t.stopPropagation(),s.disable_click=!1,t.targetTouches||(s.dragging=!0),s.self.init(t),t.targetTouches&&(s.startX=t.targetTouches[0].pageX,s.startY=t.targetTouches[0].pageY,s.startTime=(new Date).getTime(),s.self.gesture(t))},s.onMove=function(t){if(t.preventDefault(),t.stopPropagation(),s.disable_click=!0,s.dragging){var e=t.pageX,a=t.pageY;if(-1!==s.store[0].x){var n=t.target.offsetLeft+e-s.store[0].x+"px",o=t.target.offsetTop+a-s.store[0].y+"px";s.setState(function(t){t.imageLeft,t.imageTop;return{imageLeft:n,imageTop:o}})}s.store[0].x=e,s.store[0].y=a}t.targetTouches&&s.self.gesture(t)},s.onEnd=function(t){if(t.preventDefault(),t.stopPropagation(),s.dragging=!1,t.targetTouches&&(s.elapsedTime=(new Date).getTime()-s.startTime,0===t.targetTouches.length&&s.elapsedTime<=s.allowedTime&&(Math.abs(s.distX)>=s.threshold&&Math.abs(s.distY)<=s.restraint||Math.abs(s.distY)>=s.threshold&&Math.abs(s.distX)<=s.restraint))){s.swipe=!s.swipe;var e=document.getElementById(s.props.id),a=e.clientHeight,n=e.clientWidth;s.setState({src:s.swipe?"back.png":s.props.thumbnail,showFlipside:!s.state.showFlipside}),e.height=a,e.width=n}},s.init=function(){s.store[0].x=s.store[0].y=s.store[1].x=s.store[1].y=-1;for(var t=0,e=document.getElementsByTagName("img"),a=0;a<e.length;a++)parseInt(e[a].style.zIndex,10)>=t&&(t=parseInt(e[a].style.zIndex,10)+1);s.setState({zIndex:t})},s.gesture=function(t){var e=0,a=0,n=0,o=0,r=0,i=0;s.distX=t.targetTouches[0].pageX-s.startX,s.distY=t.targetTouches[0].pageY-s.startY,t.targetTouches&&(t.targetTouches.length>=2?(e=t.targetTouches[0].pageX-t.target.offsetLeft,n=t.targetTouches[0].pageY-t.target.offsetTop,a=t.targetTouches[1].pageX-t.target.offsetLeft,o=t.targetTouches[1].pageY-t.target.offsetTop,-1!==s.store[0].x&&(r=Math.atan((o-n)/(a-e))-Math.atan((s.store[1].y-s.store[0].y)/(s.store[1].x-s.store[0].x)),Math.abs(r)>=3&&(r-=Math.PI),i=Math.sqrt(Math.pow(e-a,2)+Math.pow(n-o,2))-Math.sqrt(Math.pow(s.store[0].x-s.store[1].x,2)+Math.pow(s.store[0].y-s.store[1].y,2)),s.twofinger(i,r)),s.store[0].x=e,s.store[0].y=n,s.store[1].x=a,s.store[1].y=o):1===t.targetTouches.length&&(e=t.targetTouches[0].pageX,n=t.targetTouches[0].pageY,-1!==s.store[1].x&&s.init(),-1!==s.store[0].x&&s.onefinger(e-s.store[0].x,n-s.store[0].y),s.store[0].x=e,s.store[0].y=n))},s.twofinger=function(t,e){var a=document.getElementById(s.props.id),n=(a.width*s.size+t)/(a.width*s.size);s.size*=n,s.size<.5&&(s.size=.5),s.size>1&&(s.size=1),s.angle+=e,s.setState(function(t){t.transform;return{transform:"rotate("+s.angle+"rad) scale("+s.size+")"}})},s.onefinger=function(t,e){var a=document.getElementById(s.props.id);s.setState(function(s){s.imageLeft,s.imageTop;return{imageLeft:a.offsetLeft+t+"px",imageTop:a.offsetTop+e+"px"}})},s.displayVideo=function(){s.disable_click||s.setState({showVideo:!s.state.showVideo})},s.state={imageLeft:Math.random()*(window.innerWidth/2)+"px",imageTop:Math.random()*(window.innerHeight/2)+"px",zIndex:s.props.id,transform:"rotate("+s.angle+"rad) scale("+s.size+")",src:s.props.thumbnail,showFlipside:!1,showVideo:!1},s}return Object(p.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.state,e={left:t.imageLeft,top:t.imageTop,zIndex:t.zIndex,transform:t.transform},s=null;this.state.showFlipside&&(s=o.a.createElement("p",{class:"Image-text",style:Object(g.a)({},e),onClick:this.displayVideo},"Kaiser Wilhelm beim Entenf\xfcttern"));var a=null;return this.state.showVideo&&(a=o.a.createElement(w,Object.assign({},this.props,{src:this.props.video}))),o.a.createElement("div",null,o.a.createElement("img",Object.assign({},this.props,{src:this.state.src,style:Object(g.a)({},e),onTouchStart:this.onDown,onTouchMove:this.onMove,onTouchEnd:this.onEnd,onPointerDown:this.onDown,onPointerMove:this.onMove,onPointerUp:this.onEnd,onPointerOut:this.onEnd,onClick:this.displayVideo})),s,a)}}]),e}(n.Component),T=function(t){function e(t){var s;return Object(c.a)(this,e),(s=Object(l.a)(this,Object(h.a)(e).call(this,t))).state={films:[],associations:[]},s}return Object(p.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){var t=Object(f.a)(m.a.mark(function t(){var e,s;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://raw.githubusercontent.com/gerdesque/pastforwardgraph/master/films.json");case 3:return e=t.sent,t.next=6,e.json();case 6:s=t.sent,this.setState({films:s.nodes,associations:s.arcs}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.error(t.t0);case 13:case"end":return t.stop()}},t,this,[[0,10]])}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,e=this.state.films.map(function(e){return e.thumbnail.toLowerCase().startsWith("todo")?null:o.a.createElement(b,Object.assign({key:e.id},e,{associations:t.state.associations.filter(function(t){return t.source===e.section})}))});return o.a.createElement("div",{className:"ImageList"},e)}}]),e}(n.Component),x=function(t){function e(t){var s;return Object(c.a)(this,e),(s=Object(l.a)(this,Object(h.a)(e).call(this,t))).pauseVideo=function(t){s.setState({showIntro:!1})},s.state={showIntro:!0},s}return Object(p.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=null;return t=this.state.showIntro?o.a.createElement("video",{autoPlay:!0,onPause:this.pauseVideo},o.a.createElement("source",{type:"video/mp4",src:s(27)}),"Your browser does not support the video tag."):o.a.createElement(T,null),o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement("span",{className:"App-past"},"past"),o.a.createElement("span",{className:"App-forward"},"forward")),t)}}]),e}(n.Component);i.a.render(o.a.createElement(x,null),document.getElementById("root")),document.addEventListener("touchmove",function(t){t.preventDefault()},{passive:!1})}},[[12,2,1]]]);
//# sourceMappingURL=main.49adc527.chunk.js.map